#!/bin/bash

# source the Nos framework
. /opt/nos/common.sh

# initialize Nos with the original arguments
nos_init $@

# source common lib
. ${engine_lib_dir}/common.sh

# run before exec hooks

run_hooks "before"

# run composer install

composer_install

# run exec hooks

run_hooks "exec"

# run after exec hooks

run_hooks "after"

print_bullet "Copying release into live code directory..."
rsync -a $(payload 'code_dir')/ $(payload 'live_dir')
